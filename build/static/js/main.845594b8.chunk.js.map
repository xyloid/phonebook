{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","changeHandler","pattern","onChange","event","value","PersonForm","nameHandler","phoneHander","addHandler","name","phone","onClick","type","Persons","persons","deleteHandler","map","person","key","number","baseUrl","axios","get","then","response","data","newPerson","post","id","delete","newObject","put","Notification","message","className","App","useState","setPersons","newName","setNewName","newPhoneNumber","setNewPhoneNumber","filter","setFilter","notification","setNotification","notificationClass","setNotificationClass","useEffect","personsServices","showNotification","setTimeout","target","preventDefault","result","console","log","length","window","confirm","p","catch","error","some","returnedPerson","concat","trim","toLowerCase","includes","isValid","candi","ReactDOM","render","document","getElementById"],"mappings":"0NAeeA,EAbA,SAAC,GAA8B,IAA7BC,EAA4B,EAA5BA,cAAeC,EAAa,EAAbA,QAM5B,OACA,wCACU,2BAAOC,SANU,SAACC,GACxBH,EAAcG,IAK6BC,MAAOH,MCe3CI,EAvBI,SAAC,GAA2D,IAAzDC,EAAwD,EAAxDA,YAAaC,EAA2C,EAA3CA,YAAaC,EAA8B,EAA9BA,WAAYC,EAAkB,EAAlBA,KAAMC,EAAY,EAAZA,MAKhE,OACE,8BACE,sCACQ,2BAAOR,SAPM,SAACC,GAAD,OAAWG,EAAYH,IAODC,MAAOK,KAElD,uCAEE,2BAAOP,SAVmB,SAACC,GAAD,OAAWI,EAAYJ,IAUPC,MAAOM,KAEnD,6BACE,4BAAQC,QAZI,SAACR,GAAD,OAAWK,EAAWL,IAYNS,KAAK,UAAjC,UCPOC,EARC,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,cAAZ,OACdD,EAAQE,KAAI,SAACC,GAAD,OACV,uBAAGC,IAAKD,EAAOR,MACZQ,EAAOR,KADV,IACiBQ,EAAOE,OACtB,4BAAQR,QAAS,kBAAMI,EAAcE,KAArC,e,gBCLAG,EAAU,eA0BD,EAxBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAsB9B,EAnBA,SAACC,GAEd,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAiB9B,EAdA,SAACG,GACd,OAAOP,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BQ,KAarB,EAVA,SAACA,EAAIE,GAElB,OADgBT,IAAMU,IAAN,UAAaX,EAAb,YAAwBQ,GAAME,GAC/BP,MAAK,SAACC,GAAD,OAAcA,EAASC,SAQ9B,EALI,SAAChB,GAElB,OADgBY,IAAMC,IAAN,UAAaF,EAAb,kBAA8BX,IAC/Bc,MAAK,SAACC,GAAD,OAAcA,EAASC,SCb9BO,G,MARM,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,QAASC,EAAgB,EAAhBA,UAC/B,OAAe,MAAXD,EACK,KAEA,uBAAGC,UAAS,UAAKA,IAAeD,KCwJ5BE,EAxJH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTtB,EADS,KACAuB,EADA,OAGcD,mBAAS,IAHvB,mBAGTE,EAHS,KAGAC,EAHA,OAI4BH,mBAAS,IAJrC,mBAITI,EAJS,KAIOC,EAJP,OAMYL,mBAAS,IANrB,mBAMTM,EANS,KAMDC,EANC,OAQwBP,mBAAS,MARjC,mBAQTQ,EARS,KAQKC,EARL,OASkCT,mBAAS,IAT3C,mBASTU,EATS,KASUC,EATV,KAWhBC,qBAAU,WACRC,IAAyB1B,MAAK,SAACC,GAAD,OAAca,EAAWb,QACtD,IAEH,IAoBM0B,EAAmB,SAACjB,GACxBY,EAAgBZ,GAChBkB,YAAW,WACTN,EAAgB,KAAM,QACrB,MAyFL,OACE,6BACE,yCACA,kBAAC,EAAD,CAAcZ,QAASW,EAAcV,UAAWY,IAChD,kBAAC,EAAD,CAAQ9C,cArGe,SAACG,GAC1BwC,EAAUxC,EAAMiD,OAAOhD,QAoGsBH,QAASyC,IAEpD,0CACA,kBAAC,EAAD,CACEpC,YAjHmB,SAACH,GACxBoC,EAAWpC,EAAMiD,OAAOhD,QAiHpBG,YA9G0B,SAACJ,GAC/BsC,EAAkBtC,EAAMiD,OAAOhD,QA8G3BI,WAhGY,SAACL,GACjBA,EAAMkD,iBAENJ,EAA2BX,GAASf,MAAK,SAAC+B,GAExC,GADAC,QAAQC,IAAIF,GACRA,EAAOG,OAAS,GAElB,GADAF,QAAQC,IAAI,eAAgBlB,GAE1BoB,OAAOC,QAAP,UACKrB,EADL,gFAGA,CAQA,IAAIZ,EAAS,2BACR4B,EAAO,IADC,IAEXnC,OAAQqB,IAGVS,EACUvB,EAAUE,GAAIF,GACrBH,MAAK,SAACC,GAELa,EACEvB,EAAQE,KAAI,SAAC4C,GAAD,OAAQA,EAAEnD,OAASe,EAASf,KAAOe,EAAWoC,MAE5Db,EAAqB,gBACrBG,EAAiB,GAAD,OAAIZ,EAAJ,iBAEjBuB,OAAM,SAACC,GACNP,QAAQC,IAAI,eAAgBM,EAAMtC,SAASC,MAG3CsB,EAAqB,SACrBG,EAAiBY,EAAMtC,SAASC,KAAKqC,gBAK3C,GADAP,QAAQC,IAAI,cAAelB,GACvBA,EAAQmB,OAAS,EAAG,CACtB,IAAI/B,EAAY,CACdjB,KAAM6B,EACNnB,OAAQqB,GAEN1B,EAAQiD,MAAK,SAAC9C,GAAD,OAAYA,EAAOR,OAAS6B,MAC3CiB,QAAQC,IAAI,2CACZnB,EAAWvB,EAAQ4B,QAAO,SAACkB,GAAD,OAAOA,EAAEnD,OAAS6B,MAC5CS,EAAqB,SACrBG,EAAiB,GAAD,OACXZ,EADW,gDAIhBW,EACUvB,GACPH,MAAK,SAACyC,GACL3B,EAAWvB,EAAQmD,OAAOD,IAC1BjB,EAAqB,gBACrBG,EAAiB,GAAD,OAAIZ,EAAJ,eAEjBuB,OAAM,SAACC,GACNP,QAAQC,IAAI,8BAA+BM,GAC3Cf,EAAqB,SACrBQ,QAAQC,IAAIM,EAAMtC,SAASC,MAC3ByB,EAAiBY,EAAMtC,SAASC,KAAKqC,cAMjDvB,EAAW,IACXE,EAAkB,KAsBdhC,KAAM6B,EACN5B,MAAO8B,IAGT,uCACA,kBAAC,EAAD,CACE1B,QAASA,EAAQ4B,QAAO,SAACzB,GAAD,OAlId,SAACA,GACf,OAAsB,IAAlByB,EAAOwB,QAGFjD,EAAOR,KAAK0D,cAAcC,SAAS1B,EAAOyB,eA8HXE,CAAQpD,MAC5CF,cA1Be,SAACE,GAChByC,OAAOC,QAAP,iBAAyB1C,EAAOR,KAAhC,OACFwC,EAAuBhC,EAAOW,IAAIL,MAAK,SAACC,GACtCa,EAAWvB,EAAQ4B,QAAO,SAAC4B,GAAD,OAAWrD,EAAOW,KAAO0C,EAAM1C,eC9HjE2C,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.845594b8.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({changeHandler, pattern}) => {\n\n    const handleFilterChange = (event)=>{\n        changeHandler(event);\n    }\n\n    return (\n    <div>\n      filter: <input onChange={handleFilterChange} value={pattern} />\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({ nameHandler, phoneHander, addHandler, name, phone }) => {\n  const handleNameChange = (event) => nameHandler(event);\n  const handlePhoneNumberChange = (event) => phoneHander(event);\n  const addPerson = (event) => addHandler(event);\n\n  return (\n    <form>\n      <div>\n        name: <input onChange={handleNameChange} value={name} />\n      </div>\n      <div>\n        number:\n        <input onChange={handlePhoneNumberChange} value={phone} />\n      </div>\n      <div>\n        <button onClick={addPerson} type=\"submit\">\n          add\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, deleteHandler }) =>\n  persons.map((person) => (\n    <p key={person.name}>\n      {person.name} {person.number}\n      <button onClick={() => deleteHandler(person)}>delete</button>\n    </p>\n  ));\n\nexport default Persons;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then((response) => response.data);\n};\n\nconst findByName = (name) => {\n  const request = axios.get(`${baseUrl}/?name=${name}`);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, create, remove, update, findByName };\n","import React from \"react\";\nimport \"../index.css\";\n\nconst Notification = ({ message, className }) => {\n  if (message == null) {\n    return null;\n  } else {\n    return <p className={`${className}`} >{message}</p>;\n  }\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personsServices from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n\n  const [newName, setNewName] = useState(\"\");\n  const [newPhoneNumber, setNewPhoneNumber] = useState(\"\");\n\n  const [filter, setFilter] = useState(\"\");\n\n  const [notification, setNotification] = useState(null);\n  const [notificationClass, setNotificationClass] = useState(\"\");\n\n  useEffect(() => {\n    personsServices.getAll().then((response) => setPersons(response));\n  }, []);\n\n  const isValid = (person) => {\n    if (filter.trim() === 0) {\n      return true;\n    } else {\n      return person.name.toLowerCase().includes(filter.toLowerCase());\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handlePhoneNumberChange = (event) => {\n    setNewPhoneNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value);\n  };\n\n  const showNotification = (message) => {\n    setNotification(message);\n    setTimeout(() => {\n      setNotification(null, null);\n    }, 5000);\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    // if (persons.some((person) => person.name === newName)) {\n    personsServices.findByName(newName).then((result) => {\n      console.log(result);\n      if (result.length > 0) {\n        console.log(\"already has \", newName);\n        if (\n          window.confirm(\n            `${newName} is already added to the phonebook, replace the old number with a new one ?`\n          )\n        ) {\n          // const toUpdate = persons.find((p) => p.name === newName);\n\n          // let newPerson = {\n          //   ...toUpdate,\n          //   number: newPhoneNumber,\n          // };\n\n          let newPerson = {\n            ...result[0],\n            number: newPhoneNumber,\n          };\n\n          personsServices\n            .update(newPerson.id, newPerson)\n            .then((response) => {\n              // after update the server state, update the browser state\n              setPersons(\n                persons.map((p) => (p.name === response.name ? response : p))\n              );\n              setNotificationClass(\"notification\");\n              showNotification(`${newName} updated.`);\n            })\n            .catch((error) => {\n              console.log(\"update error\", error.response.data);\n\n              // setPersons(persons.filter((candi) => newPerson.id !== candi.id));\n              setNotificationClass(\"error\");\n              showNotification(error.response.data.error);\n            });\n        }\n      } else {\n        console.log(\"a new name \", newName);\n        if (newName.length > 0) {\n          let newPerson = {\n            name: newName,\n            number: newPhoneNumber,\n          };\n          if (persons.some((person) => person.name === newName)) {\n            console.log(\"clear current state to remove duplicate\");\n            setPersons(persons.filter((p) => p.name !== newName));\n            setNotificationClass(\"error\");\n            showNotification(\n              `${newName} has already been removed from the server.`\n            );\n          } else\n            personsServices\n              .create(newPerson)\n              .then((returnedPerson) => {\n                setPersons(persons.concat(returnedPerson));\n                setNotificationClass(\"notification\");\n                showNotification(`${newName} added.`);\n              })\n              .catch((error) => {\n                console.log(\"failed to create new person\", error);\n                setNotificationClass(\"error\");\n                console.log(error.response.data);\n                showNotification(error.response.data.error);\n              });\n        }\n      }\n    });\n\n    setNewName(\"\");\n    setNewPhoneNumber(\"\");\n  };\n\n  const deletePerson = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personsServices.remove(person.id).then((response) => {\n        setPersons(persons.filter((candi) => person.id !== candi.id));\n      });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notification} className={notificationClass} />\n      <Filter changeHandler={handleFilterChange} pattern={filter} />\n\n      <h3>Add a new </h3>\n      <PersonForm\n        nameHandler={handleNameChange}\n        phoneHander={handlePhoneNumberChange}\n        addHandler={addPerson}\n        name={newName}\n        phone={newPhoneNumber}\n      />\n\n      <h3>Numbers</h3>\n      <Persons\n        persons={persons.filter((person) => isValid(person))}\n        deleteHandler={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}